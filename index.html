<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
		
			<canvas id="painting"></canvas>
			<div class="actions" id="actions">
		    <button id="eraser">橡皮擦</button>
			<button id="brush">画笔</button>
			</div>
		


<script>
	
	var canvas = document.getElementById('painting'); 
	var context = canvas.getContext('2d');

	autoSetCanvasSize();

	listenToMouse();

	/*****监听鼠标******/
	function listenToMouse(){
		var lastPoint = {x:undefined,y:undefined};
		var eraserEnabled = false;   //是否使用橡皮擦
	    var using = false;		// 是否按下
		canvas.onmousedown = function(a){
		using = true;
		var x = a.clientX;
		var y = a.clientY;
		lastPoint = {'x':x,'y':y}
		}
		canvas.onmousemove = function(a){
		var x = a.clientX;
		var y = a.clientY;
		if(eraserEnabled&&using){
			context.clearRect(x-5,y-5,10,10);
		}
		else {
			if (using) {
					var newPoint = {'x':x,'y':y};
					drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y);
					lastPoint = newPoint;
				}
			}	
		}
		canvas.onmouseup = function(a){
			using = false;
		}
		
		eraser.onclick = function(){
			actions.className = 'actions x';
			eraserEnabled = true;
		}
		brush.onclick = function(){
			actions.className = 'actions';
	   		eraserEnabled = false;
		}
	}
	/*****调整canvas大小******/
	function autoSetCanvasSize(){
		setCanvasSize();        //全屏canvas
		window.onresize = function(){
		setCanvasSize();
		}
		function setCanvasSize(){
				var pageHeight = document.documentElement.clientHeight;
				var pageWidth = document.documentElement.clientWidth;
				canvas.height = pageHeight;
				canvas.width = pageWidth;
		}
	}
	
	function drawLine(x1,y1,x2,y2) {
		context.beginPath();
		context.moveTo(x1,y1);
		context.lineWidth = 2;
		context.lineTo(x2,y2);
		context.stroke();
		context.closePath();
	}
	function drawCircle(x,y,radius) {
		context.beginPath();
		context.arc(x,y,radius,0,2*Math.PI);
		context.stroke();
	}
	

</script>
</body>
</html>